if (self.CavalryLogger) { CavalryLogger.start_js(["IT7KR"]); }

__d("UFI2LiveTypingBroadcastMutation_StartMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"FeedbackStartTypingData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"feedback_start_typing",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FeedbackStartTypingResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"UFI2LiveTypingBroadcastMutation_StartMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"UFI2LiveTypingBroadcastMutation_StartMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"UFI2LiveTypingBroadcastMutation_StartMutation",id:"1936056526467047",text:null,metadata:{}}}}();e.exports=a}),null);
__d("UFI2LiveTypingBroadcastMutation_StopMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"FeedbackStopTypingData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"feedback_stop_typing",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FeedbackStopTypingResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"UFI2LiveTypingBroadcastMutation_StopMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"UFI2LiveTypingBroadcastMutation_StopMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"UFI2LiveTypingBroadcastMutation_StopMutation",id:"1391655900936493",text:null,metadata:{}}}}();e.exports=a}),null);
__d("clearUFIComposerInputState",["EditorState"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.inputState;switch(c.__type){case"editor-state-based":return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{editorState:b("EditorState").moveFocusToEnd(b("EditorState").createEmpty())})});case"plain-text":default:return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{selectionOffsets:{end:0,start:0},text:""})})}};e.exports=a}),null);
__d("AbstractCommentLiveTypingPublisher",["destroyOnUnload","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=10*1e3,h=10*1e3,i=200;a=function(){__p&&__p();function a(){var a=this;this.$1=null;this.$2=null;this.$3=-1;b("gkx")("708253")||b("destroyOnUnload")(this.destroy.bind(this));window.addEventListener&&window.addEventListener("unload",function(){a.destroy()})}var c=a.prototype;c.destroy=function(){this.$4(),this.$5(),this.$6()};c.handleStartEvent=function(){this.$7()||this.$8(),this.$9()};c.handleStopEvent=function(){this.$4()};c.publishStartEvent=function(){throw new Error("publishStartEvent should be overridden by subclass")};c.publishStopEvent=function(){throw new Error("publishStopEvent should be overridden by subclass")};c.$7=function(){return!!this.$1};c.$5=function(){this.$2&&(clearTimeout(this.$2),this.$2=null)};c.$6=function(){this.$1&&(clearTimeout(this.$1),this.$1=null)};c.$9=function(){var a=this,b=Date.now(),c=this.$3;b>c+i&&(this.$3=b,this.$5(),this.$2=setTimeout(function(){a.$4()},h))};c.$4=function(){this.$7()&&(this.publishStopEvent(),this.$6()),this.$5()};c.$8=function(){var a=this;this.publishStartEvent();this.$6();this.$1=setTimeout(function(){a.$8()},g)};return a}();e.exports=a}),null);
__d("UFI2LiveTypingBroadcastMutation",["ChannelClientID","RelayModern","UFI2LiveTypingBroadcastMutation_StartMutation.graphql","UFI2LiveTypingBroadcastMutation_StopMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("RelayModern").commitMutation;b("RelayModern").graphql;var j=g!==void 0?g:g=b("UFI2LiveTypingBroadcastMutation_StartMutation.graphql"),k=h!==void 0?h:h=b("UFI2LiveTypingBroadcastMutation_StopMutation.graphql");function a(a,c,d,e){d={input:{actor_id:d.actorID,feedback_id:d.feedbackID,session_id:b("ChannelClientID").getID()}};var f;e={onCompleted:e,variables:d};a?f=i(c,babelHelpers["extends"]({mutation:j},e)):f=i(c,babelHelpers["extends"]({mutation:k},e));return{dispose:function(){f&&f.dispose(),f=null}}}e.exports={start:a.bind(null,!0),stop:a.bind(null,!1)}}),null);
__d("UFI2LiveTypingBroadcastPublisher",["AbstractCommentLiveTypingPublisher","UFI2LiveTypingBroadcastMutation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d){var e;e=a.call(this)||this;e.$UFI2LiveTypingBroadcastPublisher1=b;e.$UFI2LiveTypingBroadcastPublisher2=c;e.$UFI2LiveTypingBroadcastPublisher3=null;e.$UFI2LiveTypingBroadcastPublisher4=null;e.$UFI2LiveTypingBroadcastPublisher5=d;return e}var d=c.prototype;d.destroy=function(){this.$UFI2LiveTypingBroadcastPublisher3&&this.$UFI2LiveTypingBroadcastPublisher3.dispose(),this.$UFI2LiveTypingBroadcastPublisher4&&this.$UFI2LiveTypingBroadcastPublisher4.dispose()};d.handleStartEvent=function(){a.prototype.handleStartEvent.call(this)};d.handleStopEvent=function(){a.prototype.handleStopEvent.call(this)};d.publishStartEvent=function(){var a=this;if(this.$UFI2LiveTypingBroadcastPublisher3)return;this.$UFI2LiveTypingBroadcastPublisher4&&(this.$UFI2LiveTypingBroadcastPublisher4.dispose(),this.$UFI2LiveTypingBroadcastPublisher4=null);var c=function(){a.$UFI2LiveTypingBroadcastPublisher3=null};this.$UFI2LiveTypingBroadcastPublisher3=b("UFI2LiveTypingBroadcastMutation").start(this.$UFI2LiveTypingBroadcastPublisher5,{actorID:this.$UFI2LiveTypingBroadcastPublisher1,feedbackID:this.$UFI2LiveTypingBroadcastPublisher2},c)};d.publishStopEvent=function(){var a=this;if(this.$UFI2LiveTypingBroadcastPublisher4)return;this.$UFI2LiveTypingBroadcastPublisher3&&(this.$UFI2LiveTypingBroadcastPublisher3.dispose(),this.$UFI2LiveTypingBroadcastPublisher3=null);var c=function(){a.$UFI2LiveTypingBroadcastPublisher4=null};this.$UFI2LiveTypingBroadcastPublisher4=b("UFI2LiveTypingBroadcastMutation").stop(this.$UFI2LiveTypingBroadcastPublisher5,{actorID:this.$UFI2LiveTypingBroadcastPublisher1,feedbackID:this.$UFI2LiveTypingBroadcastPublisher2},c)};return c}(b("AbstractCommentLiveTypingPublisher"));e.exports=a}),null);
__d("getUpgradedUFI2LiveTypingBroadcastComposerPlugin",["FBLogger","React","UFI2LiveTypingBroadcastPublisher","isUFI2ComposerStateEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React");function h(a,b){if(a.__type==="plain-text"&&b.__type==="plain-text")return a.text!==b.text;return a.__type==="editor-state-based"&&b.__type==="editor-state-based"?a.editorState.getCurrentContent().getBlockMap()!==b.editorState.getCurrentContent().getBlockMap():!1}function a(a){__p&&__p();var c;c=(c=a.feedback.viewer_actor)==null?void 0:c.id;var d=a.feedback.id;a=a.relayEnvironment;if(c==null||d==null){b("FBLogger")("ufi2").warn("Failed to fetch `feedback.viewer_actor.id` or `feedback.id` for use in the UFI live typing broadcast plugin. The live typing broadcast is disabled for this UFI.");return{componentWillUnmount:function(){},onBootload:function(a,b,c){},render:function(a,b,c){a.subscriptionsHandler;b=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return g.jsx(c,babelHelpers["extends"]({},b))}}}var e=new(b("UFI2LiveTypingBroadcastPublisher"))(c,d,a);return{componentWillUnmount:function(){e!=null&&e.destroy()},onBootload:function(a,c,d){if(!d)return;c=a.inputProps.composerState;b("isUFI2ComposerStateEmpty")(c)||e.handleStartEvent()},render:function(a,b,c){__p&&__p();a.subscriptionsHandler;b=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return g.jsx(c,babelHelpers["extends"]({},b,{inputProps:babelHelpers["extends"]({},a.inputProps,{onBlur:function(b){a.inputProps.onBlur&&a.inputProps.onBlur(b);if(b.isDefaultPrevented())return;e.handleStopEvent()},onCommit:function(){var b;e.handleStopEvent();return(b=a.inputProps).onCommit.apply(b,arguments)},onComposerStateChange:function(b){return a.inputProps.onComposerStateChange(function(a){var c=babelHelpers["extends"]({},a,b(a));h(a.inputState,c.inputState)&&e.handleStartEvent();return c})}})}))}}}e.exports=a}),null);