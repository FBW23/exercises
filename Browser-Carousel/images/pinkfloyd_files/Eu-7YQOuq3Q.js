if (self.CavalryLogger) { CavalryLogger.start_js(["UrtEf"]); }

__d("ReactComposerSupportNowLazyAttachment.react",["ActorURI","AdsCallToActionTypes.bs","Bootloader","ReactComposerAttachmentType","ReactComposerBootloaderPropTypes","ReactComposerLoadableAttachmentBodyMixin","XReactComposerSupportNowAttachmentBootstrapController","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerSupportNowLazyAttachment",mixins:[b("ReactComposerLoadableAttachmentBodyMixin")],statics:{attachmentID:b("ReactComposerAttachmentType").SUPPORT_NOW},propTypes:{additionalFooterActions:b("prop-types").arrayOf(b("prop-types").element),bootloader:b("ReactComposerBootloaderPropTypes")},bootload:function(a){this.props.bootloader&&this.props.bootloader.supportNowAttachment?this.props.bootloader.supportNowAttachment(a):b("Bootloader").loadModules(["ReactComposerSupportNowAttachmentContainer.react"],a,"ReactComposerSupportNowLazyAttachment.react")},getBootstrapURI:function(){var a=b("XReactComposerSupportNowAttachmentBootstrapController").getURIBuilder().setString("composer_id",this.context.composerID).setString("profile_id",this.context.targetID).getURI();return b("ActorURI").create(a,this.context.actorID)}});e.exports=a}),null);
__d("ReactComposerMediaSproutContainer.react",["fbt","FluxContainer","React","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerDisabledSproutItem.react","ReactComposerMediaSprout.react","ReactComposerMediaUploadStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){d.setState({showPagePostTemplateNux:!1}),b("ReactComposerTaggerActions").handleSetTaggerShowNUX(d.context.composerID,"page_post_template",!1)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("ReactComposerAttachmentStore"),b("ReactComposerMediaUploadStore"),b("ReactComposerTaggerStore")]};c.calculateState=function(a,c,d){a=b("ReactComposerAttachmentStore").getIsAttachmentSelected(d.composerID,b("ReactComposerAttachmentType").MEDIA);c=b("ReactComposerMediaUploadStore").getUploadsCount(d.composerID);var e=b("ReactComposerTaggerStore").shouldShowNUX(d.composerID,"page_post_template");d=b("ReactComposerAttachmentStore").isContentMultiShareAttachment(d.composerID)||b("ReactComposerTaggerStore").isDisabled(d.composerID,b("ReactComposerTaggerType").MEDIA);return{highlighted:!!c&&a,showPagePostTemplateNux:e,isDisabled:d}};var d=c.prototype;d.render=function(){var a=this;return this.state.isDisabled?h.jsx(b("ReactComposerDisabledSproutItem.react"),{uiConfig:this.props.uiConfig}):h.jsxs("div",{children:[h.jsx(b("ReactComposerMediaSprout.react"),babelHelpers["extends"]({config:this.props.config,mediaType:"MEDIA",ref:"mediaSprout"},this.props,this.state)),h.jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.mediaSprout},onCloseButtonClick:this.$1,position:"left",shown:this.state.showPagePostTemplateNux,children:g._("Posts with photos typically get more engagement.")})]})};return c}(h.PureComponent);a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerSproutsLiveVideoSelector.react",["ix","fbt","React","ReactComposerAttachmentType","ReactComposerLoggingName","ReactComposerSproutsSelector.react","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.defaultProps={onSelected:function(){}},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return i.jsx(b("ReactComposerSproutsSelector.react"),{attachmentID:b("ReactComposerAttachmentType").LIVE_VIDEO,loggingName:b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR,icon:g("123206"),label:h._("Live Video"),onSelected:this.props.onSelected,dataTestID:"react-composer-live-video-selector-react"})};return c}(i.Component);e.exports=a}),null);
__d("ReactComposerSproutsLiveVideoDialogSelector.react",["Arbiter","Bootloader","React","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextConfig","ReactComposerEvents","ReactComposerLoggingName","ReactComposerSproutsLiveVideoSelector.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("ReactComposerAttachmentActions").selectAttachment(d.props.contextConfig.composerID,b("ReactComposerAttachmentType").LIVE_VIDEO,!0,b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR),setTimeout(function(){return b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+d.props.contextConfig.composerID)},0),b("Bootloader").loadModules(["LiveVideoBroadcastUtils"],function(a){return a.startPreviewUI(d.props.contextConfig,d.props.config)},"ReactComposerSproutsLiveVideoDialogSelector.react")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return g.jsx(b("ReactComposerSproutsLiveVideoSelector.react"),{onSelected:this.$1})};return c}(g.Component);e.exports=a}),null);
__d("ReactFeedSproutsComposerX.react",["cx","Arbiter","Bootloader","JSResource","LitestandComposer","React","ReactComposerAsset3dEagerAttachment.react","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerContextProviderMixin","ReactComposerCTALazyAttachment.react","ReactComposerEvents","ReactComposerFeedMediaPostButtonContainer.react","ReactComposerFeedPostButtonContainer.react","ReactComposerFooter.react","ReactComposerFooterWithDestinationPicker.react","ReactComposerHeaderContainer.react","ReactComposerInit","ReactComposerListLazyAttachment.react","ReactComposerLiveVideoLazyAttachment.react","ReactComposerLiveVideoPreviewButton.react","ReactComposerLivingRoomLazyAttachment.react","ReactComposerLocalDevPlatformLazyAttachment.react","ReactComposerLoggingName","ReactComposerMediaEagerAttachment.react","ReactComposerMediaSproutContainer.react","ReactComposerMessageLazyAttachment.react","ReactComposerPagesBootloader","ReactComposerPlaceListLazyAttachment.react","ReactComposerPrefillUtils","ReactComposerQAndALazyAttachment.react","ReactComposerShopLazyAttachment.react","ReactComposerSproutsAlbumSelector.react","ReactComposerSproutsListContainer.react","ReactComposerSproutsLiveVideoDialogSelector.react","ReactComposerSproutsMediaSelector.react","ReactComposerSproutsQAndASelector.react","ReactComposerSproutsStatusAndMediaSelector.react","ReactComposerStatusEagerAttachment.react","ReactComposerSupportNowLazyAttachment.react","ReactComposerTaggerActions","ReactComposerTaggerType","ReactComposerVisualPollLazyAttachment.react","ReactComposerWhatsAppMessageLazyAttachment.react","ReactComposerWithSprouts.react","ReactDOM","lazyLoadComponent","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("React"),i=b("lazyLoadComponent")(b("JSResource")("ReactComposerFunFactSinglePromptTaggerContainer.react").__setRef("ReactFeedSproutsComposerX.react")),j=b("lazyLoadComponent")(b("JSResource")("ReactComposerFunFactAskPromptTaggerContainer.react").__setRef("ReactFeedSproutsComposerX.react"));a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getChildContext=function(){var a=b("ReactComposerContextProviderMixin").staticGetChildContext(this.props),c=this.props.contextConfig.composerType;c=c==="pages_feed"||c==="pages_posts";a.jsModules=Object.assign({},a.jsModules,{footerModule:b("gkx")("678359")&&!c?b("ReactComposerFooterWithDestinationPicker.react"):b("ReactComposerFooter.react"),ComposerSproutsListContainer:b("ReactComposerSproutsListContainer.react")});a.jsModules.sprouts=Object.assign({},a.jsModules.sprouts,{MEDIA:b("ReactComposerMediaSproutContainer.react")});return a};d.componentDidMount=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this);if(this.props.wasStubbed&&a!==null&&a instanceof HTMLElement&&a.nodeType===Node.ELEMENT_NODE){var c=babelHelpers["extends"]({},this.props,{wasStubbed:!1});b("ReactComposerInit").initWithoutRendering(this.constructor,c,a);b("Arbiter").inform("ReactFeedComposerXBootloader/selectcomposer/"+this.props.contextConfig.composerID);this.props.wasStubbed&&b("Arbiter").inform("ReactFeedComposerXBootloader/bootload/"+this.props.contextConfig.composerID)}b("LitestandComposer").initComposer(this.props.contextConfig.composerID);c=this.props.prefillConfig;c&&c.selectedAttachment&&(b("ReactComposerAttachmentActions").selectAttachment(this.props.contextConfig.composerID,c.selectedAttachment,c.shouldActivateSelectedAttachment,c.loggingName,null,c.proxiedAttachmentID),c.shouldActivateSelectedAttachment&&b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID));c&&c.selectedTagger&&b("ReactComposerTaggerActions").selectTagger(this.props.contextConfig.composerID,b("ReactComposerLoggingName").OTHERS,c.selectedTagger);this.$1();c&&b("ReactComposerPrefillUtils").prefill(this.props.contextConfig.composerID,c,this.props.contextConfig.gks)};d.render=function(){var a=this.props.prefillConfig,c=this.$2(),d=c[0];c=c[1];return h.jsxs(b("ReactComposerWithSprouts.react"),{defaultAttachmentOnExpand:b("ReactComposerAttachmentType").STATUS,innerProps:{activateOnInit:this.props.wasStubbed,className:"_5n2b",loggingConfig:this.props.config.loggingConfig,sproutsConfig:this.props.config.sproutsConfig,promotedSprout:this.props.config.sproutsPromotionConfig?this.props.config.sproutsPromotionConfig.sprout:null},expandOnInit:a&&a.expandSproutsOnInit,children:[h.jsx(b("ReactComposerHeaderContainer.react"),babelHelpers["extends"]({},this.props,{children:d})),this.$3(),this.$4(),h.jsx(b("ReactComposerBodyContainer.react"),{expanded:this.props.config.showExpandedComposer,children:c})]})};d.$5=function(){__p&&__p();var a=this.props.config.attachmentsConfig,c=[];if(a[b("ReactComposerAttachmentType").STATUS].enabled){var d=[];a[b("ReactComposerAttachmentType").LIVE_VIDEO].enabled||d.push(b("ReactComposerAttachmentType").LIVE_VIDEO);c.push(h.jsx(b("ReactComposerSproutsStatusAndMediaSelector.react"),{alternativeAttachmentIDs:d,label:a[b("ReactComposerAttachmentType").STATUS].defaultTabTitle,statusOnly:this.props.contextConfig.gks&&this.props.contextConfig.gks.photoTab},b("ReactComposerLoggingName").STATUS_TAB_SELECTOR))}this.props.contextConfig.gks&&this.props.contextConfig.gks.photoTab&&c.push(h.jsx(b("ReactComposerSproutsMediaSelector.react"),{config:this.props.config},b("ReactComposerLoggingName").MEDIA_TAB_SELECTOR));d=this.props.contextConfig.gks&&this.props.contextConfig.gks.hideAlbumTab;if(a[b("ReactComposerAttachmentType").ALBUM].enabled&&!d){d=this.props.contextConfig.gks&&this.props.contextConfig.gks.albumTabUsesSelector;c.push(h.jsx(b("ReactComposerSproutsAlbumSelector.react"),{config:this.props.config,useCollectionSelector:d},b("ReactComposerLoggingName").ALBUM))}a[b("ReactComposerAttachmentType").LIVE_VIDEO].enabled&&c.push(h.jsx(b("ReactComposerSproutsLiveVideoDialogSelector.react"),{contextConfig:this.props.contextConfig,config:this.props.config},b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR));a[b("ReactComposerAttachmentType").QANDA].enabled&&c.push(h.jsx(b("ReactComposerSproutsQAndASelector.react"),{},b("ReactComposerLoggingName").QANDA_TAB_SELECTOR));return c};d.$2=function(){__p&&__p();var a=this.$5(),b=[];b.push(this.$6());b.push(this.$7());b.push(this.$8());var c=this.$9();c&&b.push(c);c=this.$10();c&&b.push(c);c=this.$11();c&&b.push(c);c=this.$12();c&&b.push(c);c=this.$13();c&&b.push(c);c=this.$14();c&&b.push(c);c=this.$15();c&&b.push(c);c=this.$16();c&&b.push(c);c=this.$17();c&&b.push(c);c=this.$18();c&&b.push(c);c=this.$19();c&&b.push(c);c=this.$20();c&&b.push(c);b.push();return[a,b]};d.$6=function(){var a=this.$21()===b("ReactComposerAttachmentType").STATUS,c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS].placeholderText;return h.jsx(b("ReactComposerStatusEagerAttachment.react"),{config:this.props.config,prefillConfig:this.props.prefillConfig,selected:a,postButtonModule:b("ReactComposerFeedPostButtonContainer.react"),placeholder:c},"status")};d.$7=function(){var a=this.$21()===b("ReactComposerAttachmentType").MEDIA;return h.jsx(b("ReactComposerMediaEagerAttachment.react"),{config:this.props.config,postButtonModule:b("ReactComposerFeedMediaPostButtonContainer.react"),selected:a},"media")};d.$12=function(){var a=this.$21()===b("ReactComposerAttachmentType").LIST;return b("ReactComposerListLazyAttachment.react")?h.jsx(b("ReactComposerListLazyAttachment.react"),{config:this.props.config,selected:a},b("ReactComposerAttachmentType").LIST):null};d.$11=function(){var a=this.$21()===b("ReactComposerAttachmentType").VISUAL_POLL;return b("ReactComposerVisualPollLazyAttachment.react")?h.jsx(b("ReactComposerVisualPollLazyAttachment.react"),{config:this.props.config,selected:a},b("ReactComposerAttachmentType").VISUAL_POLL):null};d.$8=function(){var a=this.$21()===b("ReactComposerAttachmentType").LIVE_VIDEO;return h.jsx(b("ReactComposerLiveVideoLazyAttachment.react"),{config:this.props.config,postButtonModule:b("ReactComposerLiveVideoPreviewButton.react"),selected:a},"live_video")};d.$10=function(){return!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").QANDA].enabled?null:h.jsx(b("ReactComposerQAndALazyAttachment.react"),{config:this.props.config},"qanda")};d.$9=function(){var a=this.$21()===b("ReactComposerAttachmentType").PLACE_LIST;return b("ReactComposerPlaceListLazyAttachment.react")?h.jsx(b("ReactComposerPlaceListLazyAttachment.react"),{config:this.props.config,bootload:function(a){return b("Bootloader").loadModules(["ReactFeedComposerPlaceListAttachmentContainer.react","ReactComposerPlaceListPostButtonContainer.react"],a,"ReactFeedSproutsComposerX.react")},selected:a},b("ReactComposerAttachmentType").PLACE_LIST):null};d.$13=function(){var a=this.$21()===b("ReactComposerAttachmentType").LIVING_ROOM;return b("ReactComposerLivingRoomLazyAttachment.react")?h.jsx(b("ReactComposerLivingRoomLazyAttachment.react"),{config:this.props.config,selected:a},b("ReactComposerAttachmentType").LIVING_ROOM):null};d.$14=function(){if(!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").ASSET_3D].enabled)return null;var a=this.$21()===b("ReactComposerAttachmentType").ASSET_3D;return h.jsx(b("ReactComposerAsset3dEagerAttachment.react"),{config:this.props.config,selected:a},b("ReactComposerAttachmentType").ASSET_3D)};d.$15=function(){if(!!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").WHATSAPP_MESSAGE]&&!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").WHATSAPP_MESSAGE].enabled)return null;var a=this.$21()===b("ReactComposerAttachmentType").WHATSAPP_MESSAGE;return h.jsx(b("ReactComposerWhatsAppMessageLazyAttachment.react"),{bootloader:b("ReactComposerPagesBootloader"),config:this.props.config,selected:a},b("ReactComposerAttachmentType").WHATSAPP_MESSAGE)};d.$16=function(){if(!!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").CTA]&&!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").CTA].enabled)return null;var a=this.$21()===b("ReactComposerAttachmentType").CTA;return b("ReactComposerCTALazyAttachment.react")?h.jsx(b("ReactComposerCTALazyAttachment.react"),{bootloader:b("ReactComposerPagesBootloader"),config:this.props.config,selected:a},b("ReactComposerAttachmentType").CTA):null};d.$20=function(){var a=this.$21()===b("ReactComposerAttachmentType").LOCAL_DEV_PLATFORM;return h.jsx(b("ReactComposerLocalDevPlatformLazyAttachment.react"),{bootloader:b("ReactComposerPagesBootloader"),config:this.props.config,selected:a},b("ReactComposerAttachmentType").LOCAL_DEV_PLATFORM)};d.$17=function(){if(!!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MESSAGE]&&!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MESSAGE].enabled)return null;var a=this.$21()===b("ReactComposerAttachmentType").MESSAGE;return h.jsx(b("ReactComposerMessageLazyAttachment.react"),{bootloader:b("ReactComposerPagesBootloader"),config:this.props.config,selected:a},b("ReactComposerAttachmentType").MESSAGE)};d.$18=function(){if(!!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").SUPPORT_NOW]&&!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").SUPPORT_NOW].enabled)return null;var a=this.$21()===b("ReactComposerAttachmentType").SUPPORT_NOW;return h.jsx(b("ReactComposerSupportNowLazyAttachment.react"),{bootloader:b("ReactComposerPagesBootloader"),config:this.props.config,selected:a},b("ReactComposerAttachmentType").SUPPORT_NOW)};d.$19=function(){if(!!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").SHOP]&&!this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").SHOP].enabled)return null;var a=this.$21()===b("ReactComposerAttachmentType").SHOP;return h.jsx(b("ReactComposerShopLazyAttachment.react"),{bootloader:b("ReactComposerPagesBootloader"),config:this.props.config,selected:a},b("ReactComposerAttachmentType").SHOP)};d.$3=function(){var a=this.props.config.taggersConfig;if(a&&a[b("ReactComposerTaggerType").FUN_FACT]&&a[b("ReactComposerTaggerType").FUN_FACT].enabled){a=this.props.contextConfig.extraConfig;return h.jsx(h.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(i,{entryPoint:a&&a.entryPoint,pinnedPromptID:a&&a.funFactPromptID})})}return null};d.$4=function(){var a=this.props.config.taggersConfig;if(a&&a[b("ReactComposerTaggerType").FUN_FACT]&&a[b("ReactComposerTaggerType").FUN_FACT].enabled){a=this.props.contextConfig.extraConfig;a&&a.funFactShowAskTagger&&b("ReactComposerTaggerActions").setTaggerData(this.props.contextConfig.composerID,b("ReactComposerLoggingName").FUN_FACT,b("ReactComposerTaggerType").FUN_FACT,{isAskPost:!0});return h.jsx(h.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(j,{entryPoint:a&&a.entryPoint})})}return null};d.$1=function(){__p&&__p();var a=this.props.config.taggersConfig;if(a&&a[b("ReactComposerTaggerType").FUNDRAISER]&&a[b("ReactComposerTaggerType").FUNDRAISER].enabled){var c=this.props.contextConfig.extraConfig&&this.props.contextConfig.extraConfig.charityID;if(c){b("ReactComposerTaggerActions").setTaggerData(this.props.contextConfig.composerID,b("ReactComposerLoggingName").FUNDRAISER_SPROUT,b("ReactComposerTaggerType").FUNDRAISER,{charityID:c});var d=this.props.contextConfig.extraConfig&&this.props.contextConfig.extraConfig.promotionalSource;b("Bootloader").loadModules(["ReactComposerFundraiserAttachmentActions"],function(a){a.prefillFundraiserAttachment(this.props.contextConfig.composerID,c,this.props.contextConfig.actorID,d)}.bind(this),"ReactFeedSproutsComposerX.react")}}};d.$21=function(){var a=this.props.prefillConfig;return a&&a.selectedAttachment?a.selectedAttachment:b("ReactComposerAttachmentType").STATUS};return c}(h.Component);a.childContextTypes=b("ReactComposerContextProviderMixin").childContextTypes;e.exports=a}),null);
__d("ReactFeedSproutsComposerXBootloader",["csx","Arbiter","AsyncRequest","Bootloader","CSS","DOM","Event","ReactComposerAsset3dAttachmentActions","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerInit","ReactComposerLoggingName","ReactComposerPromptsStore","ReactFeedSproutsComposerX.react","ReactInputSelection","Run","SubscriptionsHandler","XReactComposerLoggingODSController","$","ge","getActiveElement","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a={_inputDOMs:[],_fileInputSubscriptions:b("SubscriptionsHandler"),_prefillSubscription:null,bootload:function(a,c){var d=this,e=b("$")("feedx_sprouts_container"),f=b("DOM").find(e,"._559p"),g=b("CSS").hasClass(f,"async_saving");g?(h=new(b("SubscriptionsHandler"))(),h.addSubscriptions(b("Event").listen(f,"success",function(){d._bootloadImpl(a,e,c)}),b("Event").listen(f,"error",function(){d._bootloadImpl(a,e,c)}))):this._bootloadImpl(a,e,c);b("Run").onLeave(this._cleanup.bind(this))},_bootloadImpl:function(a,c,d){__p&&__p();var e=this;d.config.audienceXHP=this._getXHPToReactNode(c,"._ej0");var f=b("DOM").scry(c,"._16ve")[0],g=this._handlePendingMediaUploads(a,c,d,f);g=this._determineActiveAttachment(c,g);var h=!1;b("ifRequired")("ReactFeedSproutsComposerXBody",function(c){var f=c.getDroppedFiles();if(f.length>0){h=!0;var i=c.getDroppedAsset3DFile();i?(g=b("ReactComposerAttachmentType").STATUS,b("ReactComposerAsset3dAttachmentActions").selectGlbFileInput(a,i)):(g=b("ReactComposerAttachmentType").MEDIA,e._uploadExistingFiles(f,a,d));c.clearDroppedFiles()}c.setOnFilesDropCallback(function(){b("ReactComposerAttachmentActions").selectAttachment(a,b("ReactComposerAttachmentType").MEDIA,!0,b("ReactComposerLoggingName").MEDIA_SPROUT),e._uploadExistingFiles(c.getDroppedFiles(),a,d),c.clearDroppedFiles()})});f=f.getAttribute("data-selected-sprout-id");d.prefillConfig=Object.assign(d.prefillConfig,this._appendPrefillConfig(c,a,g,g==b("ReactComposerAttachmentType").SHARING_SPACES_SELECTOR?b("ReactComposerAttachmentType").STATUS:null,f,h));f=b("DOM").scry(c,"._1qf9");d.prefillConfig.messengerSectionVisible=f.length>0;f=b("DOM").scry(c,"._66-n");f.forEach(function(a){a.dataset.destination=="STORIES"?d.prefillConfig.storiesSelected=b("CSS").matchesSelector(a,"._1sfg"):a.dataset.destination=="TIMELINE"&&(d.prefillConfig.timelineSelected=b("CSS").matchesSelector(a,"._1sfg"))});this._initComposer(d,c,a)},_handlePendingMediaUploads:function(a,c,d,e){var f=this,g=!1;c=d.contextConfig.gks.photoTab?b("DOM").scry(c,'input[name="composer_photo[]"]'):b("DOM").scry(e,'input[name="composer_photo[]"]');this._subscriptions=new(b("SubscriptionsHandler"))();c.forEach(function(c){c&&(f._inputDOMs.push(c),f._subscriptions.addSubscriptions(b("Event").listen(c,"change",function(c){c=c.target;c.files&&c.files.length>0&&(f._uploadExistingFiles(c.files,a,d),b("ReactComposerAttachmentActions").selectAttachment(a,b("ReactComposerAttachmentType").MEDIA,!0,b("ReactComposerLoggingName").MEDIA_SPROUT))})),c.files&&c.files.length>0&&(g=!0,f._uploadExistingFiles(c.files,a,d)))});return g},_determineActiveAttachment:function(a,c){if(b("CSS").matchesSelector(b("DOM").find(a,"._1cx1"),"._2-q9"))return b("ReactComposerAttachmentType").SHARING_SPACES_SELECTOR;if(c)return b("ReactComposerAttachmentType").MEDIA;c=b("DOM").scry(a,"._5qtn")[0];return c&&c.getAttribute("data-attachment-type")===b("ReactComposerAttachmentType").LIVE_VIDEO?b("ReactComposerAttachmentType").LIVE_VIDEO:b("ReactComposerAttachmentType").STATUS},_initComposer:function(a,c,d){b("ReactComposerInit").init(b("ReactFeedSproutsComposerX.react"),a,c);c=b("XReactComposerLoggingODSController").getURIBuilder().setString("event","bootload_done").setEnum("composer_type",a.contextConfig.composerType).getURI();new(b("AsyncRequest"))(c).send();h&&h.release();b("Arbiter").inform("ReactFeedComposerXBootloader/bootload/"+d,a)},_appendPrefillConfig:function(a,c,d,e,f,g){__p&&__p();d===void 0&&(d=b("ReactComposerAttachmentType").STATUS);e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=!1);var h=b("DOM").find(a,"._3en1"),i=b("getActiveElement")()==h||b("CSS").hasClass(b("DOM").find(a,".focus_target"),"child_was_focused"),j=b("ge")("pagelet_composer")||b("ge")("content")||document;j=b("DOM").scry(j,"._1b3n").length!=0;a=b("CSS").matchesSelector(b("DOM").find(a,"._1cx1"),"._4qr4");h=h.value?{textWithEntities:{text:h.value},selection:b("ReactInputSelection").getSelection(h)}:null;c=b("ReactComposerPromptsStore").getMinutiaeData(c);f=f;return{mentionsInput:h,selectedAttachment:g||j?d:void 0,shouldActivateSelectedAttachment:g||(i||!!c)&&!f,proxiedAttachmentID:e,taggersData:c,selectedTagger:f,expandSproutsOnInit:a}},_getXHPToReactNode:function(a,c){a=b("DOM").scry(a,c);if(a.length===0)return null;c=a[0];a=c.cloneNode(!0);c.parentNode.replaceChild(a,c);return c},_uploadExistingFiles:function(a,c,d){var e=d.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];b("Bootloader").loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(b,f){b.uploadPhotosOrVideo(c,Array.prototype.slice.call(a),new f(d.contextConfig,e.photoLimit,{disableFaceRecognition:e.disableFaceboxTagger}),d.config.targetData.targetSupportsMultiplePhotos,"file_selector",d.config.targetData.targetSupportsMultiMedia,e)},"ReactFeedSproutsComposerXBootloader")},_cleanup:function(){this._subscriptions.release();for(var a=0;a<this._inputDOMs.length;a++)delete this._inputDOMs[a];delete this._inputDOMs;this._inputDOMs=[];this._prefillSubscription&&this._prefillSubscription.unsubscribe();this._prefillSubscription=null;b("ifRequired")("ReactFeedSproutsComposerXBody",function(a){a.cleanup()})}};e.exports=a}),null);